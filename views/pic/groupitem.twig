{% extends 'templates/default.twig' %}

{% block title %} Reporting App {% endblock %}
{% block script %}
{% if errors %}
<script type="text/javascript">
$('#create').modal('show');
</script>
{% endif %}
{% endblock %}
{% block headContent %}
        <i style="color:green" class="fa fa-list-alt"> Group Items</i>
        <span style="font-size: 20px;" class="pull-right" >
        <button class="btn btn-primary" href="" data-toggle="modal" data-target="#create" title="Create Item to group">
            <i class="fa fa-plus fa-lg"> Add Item to Group</i></button>
        </span>
{% endblock %}

{% block content %}

<div class="row">
    <div class="col-xs-12">
        <div class="panel panel-default">
            <div class="panel-body">
                {% for item in items %}
                    <!-- <form action="{{ path_for('user.item.status', { ('id'): item.id })}}" method="get"> -->
                {% endfor %}
                    <table id="" class="example2 table table-condensed table-bordered table-striped"
                            width="100%" cellspacing="0">
                            <thead>
                                <tr>
                                    <th>Image</th>
                                    <th>Name</th>
                                    <th>Description</th>
                                    <th>Recurrent</th>
                                    <th>Create By</th>
                                    <th>Status</th>
                                    <th class="text-center">Reported at</th>
                                    <th>Delete</th>
                                </tr>
                            </thead>
                            <tbody>
                            {% for item in items %}
                                <tr>
                                    <td class="text-center">
                                        <img src="{{ base_url() }}/assets/images/{{ item.image }}"
                                             height="147" width="147" style="margin-bottom:5px">
                                    </td>
                                    <td>{{ item.name }}</td>
                                    <td>{{ item.description }}</td>
                                    <td>{{ item.recurrent }}</td>
                                    <td>{{ item.names }}</td>
                                    <td>
                                        {% if item.status == 1 %}
                                        reported
                                        {% else %}
                                        unreported
                                        {% endif %}
                                    </td>
                                    <td class="text-center">{{ item.reported_at }}</td>
                                    <td>
                                        <a href="{{ path_for('pic.delete.item', {('id'): item.id})}}"
                                        title="Remove item" data-placement="top">
                                        <button class="btn btn-danger btn-md"
                                        style="margin-right:10px">Delete</button></a>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                <!-- </form> -->
            </div>
        </div>
    </div>
</div>



<div id="create" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="panel panel-default">
                <div class="panel panel-heading"><h3 class="panel-title">
                    <strong>Create item to {{ groups.name }}</strong></h3></div>
                    <div class="panel-body">
                        <form  action="{{path_for('pic.create.item')}}" method="post" enctype="multipart/form-data">
                            {% if errors %}
                            <div class="alert alert-danger">
                                <a class="close" data-dismiss="alert" href="#">x</a> Please fill out the form
                            </div>
                            {% endif %}
                            <div class="row">
                                <div class="col-xs-12 col-sm-4 col-md-5">
                                    <div class="form-group {{ errors.name ? 'has-error' : '' }}">
                                        <label for="name">Name :</label>
                                        <input type="text" name="name" class="form-control">
                                        {% if errors.name %}
                                        <span class="help-block">{{ errors.name | first }}</span>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6 col-md-7">
                                    <div class="form-group {{ errors.description ? 'has-error' : '' }}">
                                        <label for="description">Description :</label>
                                        <input type="text" name="description" class="form-control">
                                        {% if errors.description %}
                                        <span class="help-block">{{ errors.description | first }}</span>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 col-sm-5 col-md-5">
                                    <div class="form-group {{ errors.user_id ? 'has-error' : '' }}">
                                        <label for="user_id">Item to :</label>
                                        <select class="form-control" name="user_id" >
                                            <option value="">All Member</option>
                                            {% for member in members %}
                                            <option value="{{ member.id }}">{{ member.name }}</option>
                                            {% endfor %}
                                        </select>
                                        {% if errors.user_id %}
                                        <span class="help-block">{{ errors.user_id | first }}</span>
                                        {% endif %}
                                    </div>
                                </div>

                                <div class="col-xs-12 col-sm-6 col-md-7">
                                    <div class="form-group {{ errors.recurrent ? 'has-error' : '' }}">
                                        <label for="recurrent">Recurring :</label>
                                        <select class="form-control" name="recurrent" value="">
                                            <option value="">No Recurring</option>
                                            <option value="daily">Daily</option>
                                            <option value="weekly">Weekly</option>
                                            <option value="monhtly">Monthly</option>
                                            <option value="yearly">Yearly</option>
                                        </select>
                                        {% if errors.recurrent %}
                                        <span class="help-block">{{ errors.recurrent | first }}</span>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 col-sm-6 col-md-5">
                                    <div class="form-group {{ errors.image ? 'has-error' : '' }}">

                                        <label>Image :</label>
                                        <div class="input-group">
                                            <div class="input-group-addon">
                                                <i class="fa fa-image"></i>
                                            </div>
                                            <input type="file" id="file" class="form-control"
                                            name="image" placeholder="Item image">
                                        </div>
                                        {% if errors.image %}
                                        <span class="help-block">{{errors.image | first}}</span>
                                        {% endif %}<br />
                                        <div id="image_preview"><img id="previewing"
                                            src="{{ base_url() }}/assets/images/{{ login.image }}"
                                            class="img-thumbnail" style="width:200px" ></div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-6 col-md-7">
                                        <div class="form-group {{ errors.start_date ? 'has-error' : '' }}">
                                            <label for="start_date">Start date :</label>
                                            <input type="date" name="start_date" class="form-control">
                                            {% if errors.start_date %}
                                            <span class="help-block">{{ errors.start_date | first }}</span>
                                            {% endif %}
                                            <input type="hidden" name="group_id" value="{{ groups.id }}">
                                            <center>
                                                <br>
                                                <button  style="margin-top:30px;margin-bottom:10px;"
                                                type="submit" class="btn btn-success">
                                                <i class="fa fa-check-square-o" aria-hidden="true"></i> Create
                                            </button>
                                        </center>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}
